/*! Brute Select - v1.0.2 - 2013-03-20
* https://github.com/grassator/jquery-brute-select
* Copyright (c) 2013 Dmitriy Kubyshkin; Licensed MIT */
(function(e){"use strict";function t(t,s){e.extend(this,s),this.$select=t,e.extend(this,this.markup(t)),this.bindEvents()}function s(a){return"string"!=typeof a&&(a=e.extend({},s.options,a)),this.filter("select").each(function(){var s=e(this),i=s.data(a.baseName);"string"==typeof a?i[a].apply(s,Array.prototype.slice.call(arguments,1)):i||s.data(a.baseName,new t(s,a))}),this}t.prototype={getValue:function(e){return"function"==typeof this[e]?this[e]():this[e]},onFocusBlur:function(e){this.$el.toggleClass(this.generateClassName("focus",!0),e&&("focus"===e.type||"focusin"===e.type)||this.$select.is(":focus"))},onSelectChange:function(){var e=this.formatter(this.$select.find(":selected").text(),this.$select.val(),this.$select,this.$el);this.allowHtmlInTitle?this.$title.html(e):this.$title.text(e)},bindEvents:function(){this.$el.on("focusin."+this.baseName+" focusout."+this.baseName,e.proxy(this.onFocusBlur,this)),this.onFocusBlur(),this.$select.on("change."+this.baseName,e.proxy(this.onSelectChange,this)),this.onSelectChange()},destroy:function(){this.$el.off("."+this.baseName),this.$select.off("."+this.baseName),this.$select.removeClass(this.generateClassName("select")).insertBefore(this.$el),this.$el.remove()}},s.klass=t,s.formatter=function(e){return e},s.markup=function(t){var s=t.addClass(this.generateClassName("select")).wrap('<span class="'+this.generateClassName()+'"/>').parent();return e('<span class="'+this.generateClassName("arrow")+'"/>').prependTo(s),{$el:s,$title:e('<span class="'+this.generateClassName("title")+'"/>').prependTo(s)}},s.generateClassName=function(e){return this.getValue("baseName")+(e?"-"+e:"")},s.options={baseName:"brute-select",generateClassName:s.generateClassName,markup:s.markup,formatter:s.formatter,allowHtmlInTitle:!1},e.fn.bruteSelect=s})(jQuery);